import{R as x,_ as h,h as c,u as N,e as m,j as r,P as L,o as A,w as k}from"./index.70eefed5.js";import{f as C}from"./index.d7c688b0.js";const E=x.lazy(()=>h(()=>import("./Avatar.2e5aabb8.js"),["assets/Avatar.2e5aabb8.js","assets/index.70eefed5.js","assets/index.cf47ed5d.css"])),P=x.lazy(()=>h(()=>import("./LikeToggler.4eef8e40.js"),["assets/LikeToggler.4eef8e40.js","assets/Icon.f9c89057.js","assets/index.70eefed5.js","assets/index.cf47ed5d.css","assets/HeartOutline.4cdc7ae1.js"])),R=({postID:g,id:t,comments:o,updateCommentsList:d})=>{const[n,u]=c.exports.useState(!1),[y,p]=c.exports.useState(o[t].likes.length),[l,f]=c.exports.useState(o[t]),s=N(i=>i.user);c.exports.useEffect(()=>{if(s.data){const i=s.data.uid;l.likes.find(a=>a==i)!==void 0&&u(!0)}},[l]);const _=async()=>{if(s.data!==null){const i=L(A,"posts",g);if(!n){const e=[...o.map((a,w)=>w===t&&s.data?{...a,likes:[...a.likes,s.data.uid]}:{...a,likes:[...a.likes]})];await k(i,{comments:e}),f(e[t]),d(e)}if(n){const e=[...o.map(a=>({...a,likes:[...a.likes]}))];e[t].likes.splice(e[t].likes.indexOf(s.data.uid,1)),await k(i,{comments:e}),f(e[t]),d(e)}}},v=i=>{s.data!==null&&(u(e=>!e),n||p(e=>e+=1),n&&p(e=>e-=1),_())};return m("div",{className:"flex items-center py-8 gap-4 min-w-16","data-id":t,children:[r(E,{imgLink:l.author.photoUrl}),m("div",{className:"w-full p-4 rounded border border-gray-200",children:[m("div",{className:"flex items-center gap-2 mb-4",children:[r("span",{className:"dark:text-white text-gray-600",children:l.author.displayName}),r("span",{className:"dark:text-white text-gray-400",children:"\u2022"}),r("span",{className:"text-sm font-light dark:text-white text-gray-400",children:C(new Date(l.timestamp.seconds*1e3),"do MMM yy")})]}),r("p",{className:"mb-4",children:l.text}),m("div",{className:"text-xl flex items-center",children:[r(P,{id:t,handleToggle:v,active:n}),r("span",{className:"text-gray-600 text-sm",children:y})]})]})]})};export{R as default};
