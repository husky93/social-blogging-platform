import{R as l,_ as i,h as b,u as _,a as L,e as f,j as a,P,o as R,K as j,w as S,D as z,M as D}from"./index.44d26441.js";import{showAlert as x}from"./Alert.925ca583.js";const N=l.lazy(()=>i(()=>import("./Button.74507a1a.js"),["assets/Button.74507a1a.js","assets/index.44d26441.js","assets/index.fd83ad7a.css"])),O=l.lazy(()=>i(()=>import("./Comment.cd6fdfb4.js"),["assets/Comment.cd6fdfb4.js","assets/index.44d26441.js","assets/index.fd83ad7a.css","assets/index.d7c688b0.js"])),T=l.lazy(()=>i(()=>import("./Alert.925ca583.js"),["assets/Alert.925ca583.js","assets/index.44d26441.js","assets/index.fd83ad7a.css"])),B=({post:n,postID:m})=>{const[d,u]=b.exports.useState(""),[o,h]=b.exports.useState(n==null?void 0:n.comments),t=_(e=>e.user),r=_(e=>e.alert),c=L(),y=async(e,s,C,A)=>{const E=P(R,"posts",m),p={author:{uid:s,displayName:C,photoUrl:A},text:e,timestamp:j.now(),likes:[]};await S(E,{comments:z(p)}),u("");const g=[...o,p];h(g),c(D({postID:m,comments:g}))},v=e=>{e.preventDefault(),d.length>=6&&t.data?y(d,t.data.uid,t.data.displayName,t.data.photoUrl):t.data?x("Error!","Your comment needs at least 6 characters!","danger",c):x("Error!","You need to be logged in in order to add comments!","info",c)},w=e=>{h(e)},k=e=>{u(e.target.value)};return f("div",{children:[t.data?f("div",{children:[r.data.isShown?a(T,{title:r.data.title,variant:r.data.variant,children:r.data.text}):"",a("label",{htmlFor:"comment",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400",children:"Add new comment:"}),a("textarea",{value:d,onChange:k,id:"comment",rows:6,className:"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Your comment..."}),a("div",{className:"w-full flex justify-end mt-4",children:a(N,{text:"Add comment",variant:"primary",handleClick:v})})]}):"",o?o.map((e,s)=>a(O,{postID:m,id:s,comments:o,updateCommentsList:w},`comment-${s}`)):""]})};export{B as default};
