import{R as x,_ as g,r as c,u as N,j as m,a as r,P as L,g as A,w as k}from"./index.7a492b0c.js";import{f as C}from"./index.d7c688b0.js";const E=x.lazy(()=>g(()=>import("./Avatar.c5941d41.js"),["assets/Avatar.c5941d41.js","assets/index.7a492b0c.js","assets/index.eed8455a.css"])),P=x.lazy(()=>g(()=>import("./LikeToggler.8bac45bc.js"),["assets/LikeToggler.8bac45bc.js","assets/index.7a492b0c.js","assets/index.eed8455a.css","assets/HeartOutline.9776d2f8.js"])),R=({postID:h,id:t,comments:o,updateCommentsList:d})=>{const[n,u]=c.exports.useState(!1),[y,p]=c.exports.useState(o[t].likes.length),[l,f]=c.exports.useState(o[t]),s=N(i=>i.user);c.exports.useEffect(()=>{if(s.data){const i=s.data.uid;l.likes.find(a=>a==i)!==void 0&&u(!0)}},[l]);const _=async()=>{if(s.data!==null){const i=L(A,"posts",h);if(!n){const e=[...o.map((a,w)=>w===t&&s.data?{...a,likes:[...a.likes,s.data.uid]}:{...a,likes:[...a.likes]})];await k(i,{comments:e}),f(e[t]),d(e)}if(n){const e=[...o.map(a=>({...a,likes:[...a.likes]}))];e[t].likes.splice(e[t].likes.indexOf(s.data.uid,1)),await k(i,{comments:e}),f(e[t]),d(e)}}},v=i=>{s.data!==null&&(u(e=>!e),n||p(e=>e+=1),n&&p(e=>e-=1),_())};return m("div",{className:"flex items-center py-8 gap-4 min-w-16","data-id":t,children:[r(E,{imgLink:l.author.photoUrl}),m("div",{className:"w-full p-4 rounded border border-gray-200",children:[m("div",{className:"flex items-center gap-2 mb-4",children:[r("span",{className:"dark:text-white text-gray-600",children:l.author.displayName}),r("span",{className:"dark:text-white text-gray-400",children:"\u2022"}),r("span",{className:"text-sm font-light dark:text-white text-gray-400",children:C(new Date(l.timestamp.seconds*1e3),"do MMM yy")})]}),r("p",{className:"mb-4",children:l.text}),m("div",{className:"text-xl flex items-center",children:[r(P,{id:t,handleToggle:v,active:n}),r("span",{className:"text-gray-600 text-sm",children:y})]})]})]})};export{R as default};
