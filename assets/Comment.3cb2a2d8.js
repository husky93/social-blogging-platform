import{R as _,_ as v,h as m,u as C,a as T,e as o,j as r,V as E,P,p as R,w as h,U as y}from"./index.2a09c462.js";import{f as S}from"./index.9b47454f.js";const D=_.lazy(()=>v(()=>import("./Avatar.2c2dafe3.js"),["assets/Avatar.2c2dafe3.js","assets/index.2a09c462.js","assets/index.98840e68.css"])),M=_.lazy(()=>v(()=>import("./LikeToggler.dce27cc3.js"),["assets/LikeToggler.dce27cc3.js","assets/Icon.0d3d0724.js","assets/index.2a09c462.js","assets/index.98840e68.css","assets/HeartOutline.a3a7c275.js"])),b=({postID:d,id:t,comments:c,updateCommentsList:p})=>{const[l,u]=m.exports.useState(!1),[w,f]=m.exports.useState(c[t].likes.length),[n,k]=m.exports.useState(c[t]),a=C(i=>i.user),x=T(),g=new Date(n.timestamp.seconds*1e3);m.exports.useEffect(()=>{if(a.data){const i=a.data.uid;n.likes.find(s=>s==i)!==void 0&&u(!0)}},[n]);const N=async()=>{if(a.data!==null){const i=P(R,"posts",d);if(!l){const e=[...c.map((s,L)=>L===t&&a.data?{...s,likes:[...s.likes,a.data.uid]}:{...s,likes:[...s.likes]})];await h(i,{comments:e}),k(e[t]),p(e),x(y({comments:e,postID:d}))}if(l){const e=[...c.map(s=>({...s,likes:[...s.likes]}))];e[t].likes.splice(e[t].likes.indexOf(a.data.uid,1)),await h(i,{comments:e}),k(e[t]),p(e),x(y({comments:e,postID:d}))}}},A=i=>{a.data!==null&&(u(e=>!e),l||f(e=>e+=1),l&&f(e=>e-=1),N())};return o("div",{className:"flex items-center py-8 gap-4 min-w-16","data-id":t,children:[r(D,{imgLink:n.author.photoUrl}),o("div",{className:"w-full p-4 rounded border border-gray-200",children:[o("div",{className:"flex items-center gap-2 mb-4",children:[r("span",{className:"text-gray-600",children:n.author.displayName}),r("span",{className:"text-gray-400",children:"\u2022"}),o("span",{className:"text-sm font-light text-gray-400",children:[S(g,"do MMM yy")," (",E(g),")"]})]}),r("p",{className:"mb-4",children:n.text}),o("div",{className:"text-xl flex items-center",children:[r(M,{id:t,handleToggle:A,active:l}),r("span",{className:"text-gray-600 text-sm",children:w})]})]})]})};export{b as default};
