import{R as y,_,h as c,u as L,a as C,e as m,j as r,P as E,p as P,w as h,N as g}from"./index.66ef692a.js";import{f as T}from"./index.d7c688b0.js";const R=y.lazy(()=>_(()=>import("./Avatar.80a355f6.js"),["assets/Avatar.80a355f6.js","assets/index.66ef692a.js","assets/index.fd83ad7a.css"])),S=y.lazy(()=>_(()=>import("./LikeToggler.a5830b74.js"),["assets/LikeToggler.a5830b74.js","assets/Icon.ad1ace17.js","assets/index.66ef692a.js","assets/index.fd83ad7a.css","assets/HeartOutline.a3749c61.js"])),O=({postID:d,id:t,comments:o,updateCommentsList:p})=>{const[l,u]=c.exports.useState(!1),[v,f]=c.exports.useState(o[t].likes.length),[n,k]=c.exports.useState(o[t]),s=L(i=>i.user),x=C();c.exports.useEffect(()=>{if(s.data){const i=s.data.uid;n.likes.find(a=>a==i)!==void 0&&u(!0)}},[n]);const w=async()=>{if(s.data!==null){const i=E(P,"posts",d);if(!l){const e=[...o.map((a,A)=>A===t&&s.data?{...a,likes:[...a.likes,s.data.uid]}:{...a,likes:[...a.likes]})];await h(i,{comments:e}),k(e[t]),p(e),x(g({comments:e,postID:d}))}if(l){const e=[...o.map(a=>({...a,likes:[...a.likes]}))];e[t].likes.splice(e[t].likes.indexOf(s.data.uid,1)),await h(i,{comments:e}),k(e[t]),p(e),x(g({comments:e,postID:d}))}}},N=i=>{s.data!==null&&(u(e=>!e),l||f(e=>e+=1),l&&f(e=>e-=1),w())};return m("div",{className:"flex items-center py-8 gap-4 min-w-16","data-id":t,children:[r(R,{imgLink:n.author.photoUrl}),m("div",{className:"w-full p-4 rounded border border-gray-200",children:[m("div",{className:"flex items-center gap-2 mb-4",children:[r("span",{className:"dark:text-white text-gray-600",children:n.author.displayName}),r("span",{className:"dark:text-white text-gray-400",children:"\u2022"}),r("span",{className:"text-sm font-light dark:text-white text-gray-400",children:T(new Date(n.timestamp.seconds*1e3),"do MMM yy")})]}),r("p",{className:"mb-4",children:n.text}),m("div",{className:"text-xl flex items-center",children:[r(S,{id:t,handleToggle:N,active:l}),r("span",{className:"text-gray-600 text-sm",children:v})]})]})]})};export{O as default};
