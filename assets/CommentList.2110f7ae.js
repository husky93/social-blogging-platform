import{R as d,_ as l,r as p,u as b,b as L,j as _,a,P,g as R,q as j,w as S,m as z}from"./index.dfc74998.js";import{showAlert as f}from"./Alert.9a19b997.js";const D=d.lazy(()=>l(()=>import("./Button.5a6be21a.js"),["assets/Button.5a6be21a.js","assets/index.dfc74998.js","assets/index.eed8455a.css"])),N=d.lazy(()=>l(()=>import("./Comment.805b7ec9.js"),["assets/Comment.805b7ec9.js","assets/index.dfc74998.js","assets/index.eed8455a.css","assets/index.d7c688b0.js"])),O=d.lazy(()=>l(()=>import("./Alert.9a19b997.js"),["assets/Alert.9a19b997.js","assets/index.dfc74998.js","assets/index.eed8455a.css"])),Y=({post:n,postID:c})=>{const[m,i]=p.exports.useState(""),[r,u]=p.exports.useState(n==null?void 0:n.comments),e=b(t=>t.user),o=b(t=>t.alert),h=L(),x=async(t,s,k,C)=>{const A=P(R,"posts",c),g={author:{uid:s,displayName:k,photoUrl:C},text:t,timestamp:j.now(),likes:[]};await S(A,{comments:z(g)}),i("");const E=[...r,g];u(E)},y=t=>{t.preventDefault(),m.length>=6&&e.data?x(m,e.data.uid,e.data.displayName,e.data.photoUrl):e.data?f("Error!","Your comment needs at least 6 characters!","danger",h):f("Error!","You need to be logged in in order to add comments!","info",h)},v=t=>{u(t)},w=t=>{i(t.target.value)};return _("div",{children:[e.data?_("div",{children:[o.data.isShown?a(O,{title:o.data.title,variant:o.data.variant,children:o.data.text}):"",a("label",{htmlFor:"comment",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400",children:"Add new comment:"}),a("textarea",{value:m,onChange:w,id:"comment",rows:6,className:"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Your comment..."}),a("div",{className:"w-full flex justify-end mt-4",children:a(D,{text:"Add comment",variant:"primary",handleClick:y})})]}):"",r?r.map((t,s)=>a(N,{postID:c,id:s,comments:r,updateCommentsList:v},`comment-${s}`)):""]})};export{Y as default};
