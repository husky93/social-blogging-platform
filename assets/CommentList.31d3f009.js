import{R as d,_ as l,h as g,u as b,a as L,e as _,j as a,P,o as R,K as j,w as D,D as S}from"./index.70eefed5.js";import{showAlert as f}from"./Alert.a7b5d163.js";const z=d.lazy(()=>l(()=>import("./Button.d5dcd604.js"),["assets/Button.d5dcd604.js","assets/index.70eefed5.js","assets/index.cf47ed5d.css"])),N=d.lazy(()=>l(()=>import("./Comment.5e2df665.js"),["assets/Comment.5e2df665.js","assets/index.70eefed5.js","assets/index.cf47ed5d.css","assets/index.d7c688b0.js"])),O=d.lazy(()=>l(()=>import("./Alert.a7b5d163.js"),["assets/Alert.a7b5d163.js","assets/index.70eefed5.js","assets/index.cf47ed5d.css"])),Y=({post:n,postID:c})=>{const[m,i]=g.exports.useState(""),[o,u]=g.exports.useState(n==null?void 0:n.comments),e=b(t=>t.user),r=b(t=>t.alert),h=L(),x=async(t,s,k,C)=>{const A=P(R,"posts",c),p={author:{uid:s,displayName:k,photoUrl:C},text:t,timestamp:j.now(),likes:[]};await D(A,{comments:S(p)}),i("");const E=[...o,p];u(E)},y=t=>{t.preventDefault(),m.length>=6&&e.data?x(m,e.data.uid,e.data.displayName,e.data.photoUrl):e.data?f("Error!","Your comment needs at least 6 characters!","danger",h):f("Error!","You need to be logged in in order to add comments!","info",h)},v=t=>{u(t)},w=t=>{i(t.target.value)};return _("div",{children:[e.data?_("div",{children:[r.data.isShown?a(O,{title:r.data.title,variant:r.data.variant,children:r.data.text}):"",a("label",{htmlFor:"comment",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400",children:"Add new comment:"}),a("textarea",{value:m,onChange:w,id:"comment",rows:6,className:"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Your comment..."}),a("div",{className:"w-full flex justify-end mt-4",children:a(z,{text:"Add comment",variant:"primary",handleClick:y})})]}):"",o?o.map((t,s)=>a(N,{postID:c,id:s,comments:o,updateCommentsList:v},`comment-${s}`)):""]})};export{Y as default};
