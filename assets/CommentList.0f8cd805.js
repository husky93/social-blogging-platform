import{R as l,_ as i,h as f,u as b,a as P,e as g,j as a,P as R,p as j,M as N,w as S,E as k,N as z}from"./index.f31e121f.js";import{showAlert as v}from"./Alert.c42b95f7.js";const O=l.lazy(()=>i(()=>import("./Button.b36830c7.js"),["assets/Button.b36830c7.js","assets/index.f31e121f.js","assets/index.0fc7d390.css"])),T=l.lazy(()=>i(()=>import("./Comment.80b724db.js"),["assets/Comment.80b724db.js","assets/index.f31e121f.js","assets/index.0fc7d390.css","assets/index.44f7e705.js"])),V=l.lazy(()=>i(()=>import("./Alert.c42b95f7.js"),["assets/Alert.c42b95f7.js","assets/index.f31e121f.js","assets/index.0fc7d390.css"])),B=({post:m,postID:r})=>{const[c,u]=f.exports.useState(""),[o,h]=f.exports.useState(m==null?void 0:m.comments),e=b(t=>t.user),s=b(t=>t.alert),d=P(),x=async(t,n,A,E)=>{const L=R(j,"posts",r),p={author:{uid:n,displayName:A,photoUrl:E},text:t,timestamp:N.now(),likes:[]};await S(L,{comments:k(p)}),u("");const _=[...o,p];h(_),d(z({postID:r,comments:_}))},w=t=>{t.preventDefault(),c.length>=6&&e.data?x(c,e.data.uid,e.data.displayName,e.data.photoUrl):e.data?v("Error!","Your comment needs at least 6 characters!","danger",d):v("Error!","You need to be logged in in order to add comments!","info",d)},y=t=>{h(t)},C=t=>{u(t.target.value)};return g("div",{children:[e.data?g("div",{children:[s.data.isShown?a(V,{title:s.data.title,variant:s.data.variant,children:s.data.text}):"",a("label",{htmlFor:"comment",className:"block mb-2 text-sm font-medium text-gray-90",children:"Add new comment:"}),a("textarea",{value:c,onChange:C,id:"comment",rows:6,className:"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your comment..."}),a("div",{className:"w-full flex justify-end mt-4",children:a(O,{text:"Add comment",variant:"primary",handleClick:w})})]}):"",o?o.map((t,n)=>a(T,{postID:r,id:n,comments:o,updateCommentsList:y},`comment-${n}`)):""]})};export{B as default};
