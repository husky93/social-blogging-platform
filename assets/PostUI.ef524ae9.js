import{r as i,a as t,u as L,b as P,j as v,I as C,P as I,g as z,w as B,m as D,v as E}from"./index.7a492b0c.js";import{showAlert as M}from"./Alert.1ea8202a.js";import{H as R,a as U}from"./HeartOutline.9776d2f8.js";const V=i.exports.forwardRef(function(l,a){return t("svg",{...Object.assign({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},l,{ref:a}),children:t("path",{d:"M400 480a16 16 0 0 1-10.63-4L256 357.41L122.63 476A16 16 0 0 1 96 464V96a64.07 64.07 0 0 1 64-64h192a64.07 64.07 0 0 1 64 64v368a16 16 0 0 1-16 16z",fill:"currentColor"})})}),X=i.exports.forwardRef(function(l,a){return t("svg",{...Object.assign({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},l,{ref:a}),children:t("path",{d:"M352 48H160a48 48 0 0 0-48 48v368l144-128l144 128V96a48 48 0 0 0-48-48z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"})})}),K=({likes:u=[],bookmarks:l=[],postID:a})=>{const[h,w]=i.exports.useState(!1),[f,b]=i.exports.useState(!1),[m,A]=i.exports.useState(u.length),[j,N]=i.exports.useState(l.length),c=L(e=>e.user),O=P();i.exports.useEffect(()=>{if(c.data!==null){const e=c.data.uid,r=u.find(o=>o===e),s=l.find(o=>o===e);r!==void 0&&w(!0),s!==void 0&&b(!0)}},[c]);const p=async(e,r,s,o,n,g)=>{if(n&&s){const x=I(z,o,n);if(!e){const k=g?{likesCount:m+1}:{};await B(x,{[r]:D(s),...k})}if(e){const k=g?{likesCount:m-1}:{};await B(x,{[r]:E(s),...k})}}},S=async(e,r,s,o,n)=>{p(e,r,s,o,n),p(e,r,n,"posts",s)},y=(e,r,s,o,n,g,x,k,H)=>{if(c.data===null){M("Error!","You must be logged in to like / bookmark your favorite posts!","warning",O);return}r(e?d=>d-1:d=>d+1),s(d=>!d),o(e,k,n,g,x,H)};return a===void 0?t("div",{}):v("div",{className:"hidden min-w-16 py-4 pr-6 sm:flex sm:flex-col sm:gap-8 text-2xl",children:[v("div",{className:"flex flex-col justify-center items-center",children:[t("button",{className:h?"flex items-center transition-all p-1 text-green-500 rounded cursor-pointer hover:text-green-800 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600":"flex items-center transition-all p-1 text-gray-500 rounded cursor-pointer hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",onClick:()=>{var e;y(h,A,w,p,(e=c.data)==null?void 0:e.uid,"posts",a,"likes",!0)},children:t(C,{children:h?t(R,{}):t(U,{})})}),t("span",{className:"text-gray-500 text-sm",children:m})]}),v("div",{className:"flex flex-col justify-center items-center",children:[t("button",{className:f?"flex items-center transition-all p-1 text-green-500 rounded cursor-pointer hover:text-green-800 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600":"flex items-center transition-all p-1 text-gray-500 rounded cursor-pointer hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",onClick:()=>{var e;y(f,N,b,S,a,"users",(e=c.data)==null?void 0:e.uid,"bookmarks")},children:t(C,{children:f?t(V,{}):t(X,{})})}),t("span",{className:"text-gray-500 text-sm",children:j})]})]})};export{K as default};
