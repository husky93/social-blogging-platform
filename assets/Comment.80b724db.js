import{R as _,_ as v,h as m,u as C,a as T,e as o,j as r,O as E,P,p as O,w as h,N as y}from"./index.f31e121f.js";import{f as R}from"./index.44f7e705.js";const S=_.lazy(()=>v(()=>import("./Avatar.cf44a647.js"),["assets/Avatar.cf44a647.js","assets/index.f31e121f.js","assets/index.0fc7d390.css"])),D=_.lazy(()=>v(()=>import("./LikeToggler.7e49fdc1.js"),["assets/LikeToggler.7e49fdc1.js","assets/Icon.e85e3333.js","assets/index.f31e121f.js","assets/index.0fc7d390.css","assets/HeartOutline.867b84ca.js"])),z=({postID:d,id:t,comments:c,updateCommentsList:p})=>{const[l,u]=m.exports.useState(!1),[N,f]=m.exports.useState(c[t].likes.length),[n,k]=m.exports.useState(c[t]),a=C(i=>i.user),x=T(),g=new Date(n.timestamp.seconds*1e3);m.exports.useEffect(()=>{if(a.data){const i=a.data.uid;n.likes.find(s=>s==i)!==void 0&&u(!0)}},[n]);const w=async()=>{if(a.data!==null){const i=P(O,"posts",d);if(!l){const e=[...c.map((s,L)=>L===t&&a.data?{...s,likes:[...s.likes,a.data.uid]}:{...s,likes:[...s.likes]})];await h(i,{comments:e}),k(e[t]),p(e),x(y({comments:e,postID:d}))}if(l){const e=[...c.map(s=>({...s,likes:[...s.likes]}))];e[t].likes.splice(e[t].likes.indexOf(a.data.uid,1)),await h(i,{comments:e}),k(e[t]),p(e),x(y({comments:e,postID:d}))}}},A=i=>{a.data!==null&&(u(e=>!e),l||f(e=>e+=1),l&&f(e=>e-=1),w())};return o("div",{className:"flex items-center py-8 gap-4 min-w-16","data-id":t,children:[r(S,{imgLink:n.author.photoUrl}),o("div",{className:"w-full p-4 rounded border border-gray-200",children:[o("div",{className:"flex items-center gap-2 mb-4",children:[r("span",{className:"text-gray-600",children:n.author.displayName}),r("span",{className:"text-gray-400",children:"\u2022"}),o("span",{className:"text-sm font-light text-gray-400",children:[R(g,"do MMM yy")," (",E(g),")"]})]}),r("p",{className:"mb-4",children:n.text}),o("div",{className:"text-xl flex items-center",children:[r(D,{id:t,handleToggle:A,active:l}),r("span",{className:"text-gray-600 text-sm",children:N})]})]})]})};export{z as default};
