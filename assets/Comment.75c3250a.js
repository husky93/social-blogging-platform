import{R as y,_,h as c,u as L,a as C,e as m,j as n,P as E,p as P,w as h,N as g}from"./index.803f8f97.js";import{f as T}from"./index.d7c688b0.js";const R=y.lazy(()=>_(()=>import("./Avatar.927ceaf2.js"),["assets/Avatar.927ceaf2.js","assets/index.803f8f97.js","assets/index.241ea0b6.css"])),S=y.lazy(()=>_(()=>import("./LikeToggler.edcac1e2.js"),["assets/LikeToggler.edcac1e2.js","assets/Icon.af6d7233.js","assets/index.803f8f97.js","assets/index.241ea0b6.css","assets/HeartOutline.facedf48.js"])),O=({postID:d,id:t,comments:o,updateCommentsList:p})=>{const[l,u]=c.exports.useState(!1),[v,f]=c.exports.useState(o[t].likes.length),[r,k]=c.exports.useState(o[t]),a=L(i=>i.user),x=C();c.exports.useEffect(()=>{if(a.data){const i=a.data.uid;r.likes.find(s=>s==i)!==void 0&&u(!0)}},[r]);const N=async()=>{if(a.data!==null){const i=E(P,"posts",d);if(!l){const e=[...o.map((s,A)=>A===t&&a.data?{...s,likes:[...s.likes,a.data.uid]}:{...s,likes:[...s.likes]})];await h(i,{comments:e}),k(e[t]),p(e),x(g({comments:e,postID:d}))}if(l){const e=[...o.map(s=>({...s,likes:[...s.likes]}))];e[t].likes.splice(e[t].likes.indexOf(a.data.uid,1)),await h(i,{comments:e}),k(e[t]),p(e),x(g({comments:e,postID:d}))}}},w=i=>{a.data!==null&&(u(e=>!e),l||f(e=>e+=1),l&&f(e=>e-=1),N())};return m("div",{className:"flex items-center py-8 gap-4 min-w-16","data-id":t,children:[n(R,{imgLink:r.author.photoUrl}),m("div",{className:"w-full p-4 rounded border border-gray-200",children:[m("div",{className:"flex items-center gap-2 mb-4",children:[n("span",{className:"text-gray-600",children:r.author.displayName}),n("span",{className:"text-gray-400",children:"\u2022"}),n("span",{className:"text-sm font-light text-gray-400",children:T(new Date(r.timestamp.seconds*1e3),"do MMM yy")})]}),n("p",{className:"mb-4",children:r.text}),m("div",{className:"text-xl flex items-center",children:[n(S,{id:t,handleToggle:w,active:l}),n("span",{className:"text-gray-600 text-sm",children:v})]})]})]})};export{O as default};
