import{R as l,_ as i,h as f,u as b,a as P,e as g,j as a,P as R,p as j,T as N,w as S,N as T,U as k}from"./index.fcf2c776.js";import{showAlert as v}from"./Alert.0b6d2226.js";const z=l.lazy(()=>i(()=>import("./Button.b4db02de.js"),["assets/Button.b4db02de.js","assets/index.fcf2c776.js","assets/index.644a72a2.css"])),O=l.lazy(()=>i(()=>import("./Comment.116ae403.js"),["assets/Comment.116ae403.js","assets/index.fcf2c776.js","assets/index.644a72a2.css","assets/index.dd5dba0b.js"])),V=l.lazy(()=>i(()=>import("./Alert.0b6d2226.js"),["assets/Alert.0b6d2226.js","assets/index.fcf2c776.js","assets/index.644a72a2.css"])),U=({post:m,postID:r})=>{const[c,u]=f.exports.useState(""),[o,h]=f.exports.useState(m==null?void 0:m.comments),e=b(t=>t.user),s=b(t=>t.alert),d=P(),x=async(t,n,A,E)=>{const L=R(j,"posts",r),p={author:{uid:n,displayName:A,photoUrl:E},text:t,timestamp:N.now(),likes:[]};await S(L,{comments:T(p)}),u("");const _=[...o,p];h(_),d(k({postID:r,comments:_}))},w=t=>{t.preventDefault(),c.length>=6&&e.data?x(c,e.data.uid,e.data.displayName,e.data.photoUrl):e.data?v("Error!","Your comment needs at least 6 characters!","danger",d):v("Error!","You need to be logged in in order to add comments!","info",d)},y=t=>{h(t)},C=t=>{u(t.target.value)};return g("div",{children:[e.data?g("div",{children:[s.data.isShown?a(V,{title:s.data.title,variant:s.data.variant,children:s.data.text}):"",a("label",{htmlFor:"comment",className:"block mb-2 text-sm font-medium text-gray-90",children:"Add new comment:"}),a("textarea",{value:c,onChange:C,id:"comment",rows:6,className:"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your comment..."}),a("div",{className:"w-full flex justify-end mt-4",children:a(z,{text:"Add comment",variant:"primary",handleClick:w})})]}):"",o?o.map((t,n)=>a(O,{postID:r,id:n,comments:o,updateCommentsList:y},`comment-${n}`)):""]})};export{U as default};
